import tkinter as tk
import random

SIZE = 3
MINES = 3

BG_COLOR = "#0b132b"      # —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω
BTN_COLOR = "#1c2541"     # —Ç—ë–º–Ω–æ-—Å–∏–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
TEXT_COLOR = "white"

root = tk.Tk()
root.title("‚ùÑÔ∏è –ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –º–∏–Ω—ã ‚ùÑÔ∏è")
root.configure(bg=BG_COLOR)
root.resizable(False, False)

# ---------- –õ–û–ì–ò–ö–ê –ò–ì–†–´ ----------
field = [[0]*SIZE for _ in range(SIZE)]
buttons = [[None]*SIZE for _ in range(SIZE)]
opened = 0

mines = set()
while len(mines) < MINES:
    mines.add((random.randint(0, 2), random.randint(0, 2)))

for x, y in mines:
    field[x][y] = "M"
    for dx in [-1, 0, 1]:
        for dy in [-1, 0, 1]:
            nx, ny = x+dx, y+dy
            if 0 <= nx < SIZE and 0 <= ny < SIZE and field[nx][ny] != "M":
                field[nx][ny] += 1

def click(x, y):
    global opened
    btn = buttons[x][y]

    if btn["state"] == "disabled":
        return

    if field[x][y] == "M":
        btn.config(text="üí£", bg="red")
        for i, j in mines:
            buttons[i][j].config(text="üí£")
        status.config(text="üí• –¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª!")
    else:
        btn.config(
            text=str(field[x][y]) if field[x][y] > 0 else "‚ùÑÔ∏è",
            bg="#3a86ff"
        )
        opened += 1
        if opened == SIZE*SIZE - MINES:
            status.config(text="üéâ –ü–æ–±–µ–¥–∞! –° –ù–æ–≤—ã–º –≥–æ–¥–æ–º!")

    btn.config(state="disabled")

# ---------- –ü–û–õ–ï ----------
frame = tk.Frame(root, bg=BG_COLOR)
frame.pack(padx=20, pady=20)

for i in range(SIZE):
    for j in range(SIZE):
        b = tk.Button(
            frame,
            text="",
            width=6,
            height=3,
            bg=BTN_COLOR,
            fg=TEXT_COLOR,
            font=("Arial", 14),
            command=lambda x=i, y=j: click(x, y)
        )
        b.grid(row=i, column=j, padx=5, pady=5)
        buttons[i][j] = b

# ---------- –°–¢–ê–¢–£–° ----------
status = tk.Label(
    root,
    text="‚ùÑÔ∏è –ù–∞–π–¥–∏ 3 –º–∏–Ω—ã ‚ùÑÔ∏è",
    bg=BG_COLOR,
    fg="white",
    font=("Arial", 14)
)
status.pack(pady=10)

# ---------- –°–ù–ï–ì ----------
canvas = tk.Canvas(root, width=300, height=80, bg=BG_COLOR, highlightthickness=0)
canvas.pack()

snowflakes = []
for _ in range(20):
    x = random.randint(0, 300)
    y = random.randint(0, 80)
    flake = canvas.create_text(x, y, text="‚ùÑÔ∏è", font=("Arial", 12))
    snowflakes.append(flake)

def snow():
    for flake in snowflakes:
        canvas.move(flake, 0, 2)
        x, y = canvas.coords(flake)
        if y > 80:
            canvas.coords(flake, random.randint(0, 300), 0)
    root.after(100, snow)

snow()
root.mainloop()
