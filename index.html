import tkinter as tk
import random

SIZE = 3
MINES = 3

# üßä –¶–í–ï–¢–ê (–õ–ï–î–Ø–ù–û–ô –°–¢–ò–õ–¨)
BG = "#07182e"        # —Ç—ë–º–Ω—ã–π –ª—ë–¥
BTN = "#102a43"       # —Ö–æ–ª–æ–¥–Ω—ã–π —Å–∏–Ω–∏–π
OPEN = "#1c4e80"      # –æ—Ç–∫—Ä—ã—Ç–∞—è –∫–ª–µ—Ç–∫–∞
TEXT = "#e0f2ff"      # –ª–µ–¥—è–Ω–æ–π —Ç–µ–∫—Å—Ç

root = tk.Tk()
root.title("üßä –õ–µ–¥—è–Ω—ã–µ –º–∏–Ω—ã")
root.configure(bg=BG)
root.resizable(False, False)

# ‚ùÑÔ∏è –°–ù–ï–ì (–°–í–ï–†–•–£, –ù–ï –ú–ï–®–ê–ï–¢ –ö–õ–ò–ö–ê–ú)
canvas = tk.Canvas(root, width=260, height=70, bg=BG, highlightthickness=0)
canvas.pack()

flakes = []
for _ in range(20):
    f = canvas.create_text(
        random.randint(0, 260),
        random.randint(0, 70),
        text="‚ùÑ",
        fill="white",
        font=("Arial", 12)
    )
    flakes.append(f)

def snow():
    for f in flakes:
        canvas.move(f, 0, 2)
        x, y = canvas.coords(f)
        if y > 70:
            canvas.coords(f, random.randint(0, 260), 0)
    root.after(120, snow)

snow()

# ---------- –ò–ì–†–ê ----------
field = [[0]*SIZE for _ in range(SIZE)]
buttons = [[None]*SIZE for _ in range(SIZE)]
opened = 0

mines = set()
while len(mines) < MINES:
    mines.add((random.randint(0, 2), random.randint(0, 2)))

for x, y in mines:
    field[x][y] = "M"
    for dx in [-1, 0, 1]:
        for dy in [-1, 0, 1]:
            nx, ny = x+dx, y+dy
            if 0 <= nx < SIZE and 0 <= ny < SIZE and field[nx][ny] != "M":
                field[nx][ny] += 1

frame = tk.Frame(root, bg=BG)
frame.pack(padx=15, pady=15)

def click(x, y):
    global opened
    b = buttons[x][y]
    if b["state"] == "disabled":
        return

    if field[x][y] == "M":
        b.config(text="üí£", bg="#7a0c0c")
        for i, j in mines:
            buttons[i][j].config(text="üí£")
    else:
        b.config(
            text="" if field[x][y] == 0 else str(field[x][y]),
            bg=OPEN
        )
        opened += 1
    b.config(state="disabled")

for i in range(SIZE):
    for j in range(SIZE):
        b = tk.Button(
            frame,
            width=6,
            height=3,
            bg=BTN,
            fg=TEXT,
            font=("Arial", 14, "bold"),
            relief="ridge",
            activebackground=OPEN,
            command=lambda x=i, y=j: click(x, y)
        )
        b.grid(row=i, column=j, padx=6, pady=6)
        buttons[i][j] = b

root.mainloop()
